#缘起

 2018年5月份第一次面试字节跳动，彼时大概还叫今日头条，起码公司logo仍是今日头条。经历了美团和网易的面试之后，经学长推荐之后收到了头条的面试通知。面试大概持续2.5h，其间问到了很多linux内核，以及线程，进程间通信的知识。却对主流的Java Spring系列只字未提。而且还问到了协程这个当时非常新的概念(起码对于本人来说如此)，很遗憾我以为是某个订机票的，之后才知道这是go语言原生的一个特性。所以还是要保持技术的敏锐度。此外头条有一个纸上写代码的环节，没有在线编辑可以实时修改的优势，如果没有清晰的逻辑，那简直是惨不忍睹，结果可想而知。


#为什么选择头条

在准备找实习的过程中，心仪的公司有两家，阿里云和字节跳动，三月初没有充分的准备就把简历投到了阿里云，题目刷的也不多，项目又大多与区块链相关，面试失败。于是决定主攻头条，没有找学长捞阿里云的简历，不准备进行自救。听说头条面试的人很多都以失败告终，算法题直接就是hard难度。所以那段时间感觉每天顶着巨大的压力，谢绝各种娱乐活动，全力准备。幸运地，结果不错，拿到了广告部的实习offer。

#面试具体问题

**简历**

劝诫大家，简历真的超级重要，虽只一页pdf，但是怎样把自己掌握的技术深入浅出的表达出来还是相当有讲究的，建议大家找已经在内部工作的学长进行一番指导。

**Q1**

自我介绍：没什么好说的，流程化的东西，言简意赅，最多三分钟表述即可。

**Q2**

在网上看到很多LRU的实现，单调栈，RMQ之类的问题，面试时都没有考到，不过单调栈之类的问题，靠面试时短短10-20min灵光一现突然想到的概率应该为0吧，还是要常伴leetcode。
算法题目：链表冗余节点的删除，建堆与删除堆顶元素的操作，超级频繁的股票问题。

**Q3**

项目问题：从简历上面一个电商平台的项目出发，主要询问如此实现一个高可用高并发的架构，核心为异步+解耦,
分别从IO复用，缓存，消息队列，数据库分库分表，读写分离入手，进行细细阐述，评价指标为QPS，TPS。当时问道直接读写mysql数据库qps能达到多少？没有答出来，但这应该又是另一个比较大的问题了吧，应该与需不需要跨表查询，有没有索引，使用的存储引擎有关吧，本人没有深入了解。同样对区块链子字未提，所以这个是不是下一个风口还是留给那些坐而论道者吧，但靠它找不到工作是真的或者很难找到。

##接下来就是对相关技术框架的考察了

**Q4**

redis在项目中的角色：
1、session同步，网站嘛大家都懂的，session，kookie是永远回避不了的。但是为了实现业务的水平扩展，在分布式的架构下，需要解决session同步的问题，session同步的解决方案分多种，可根据实际的业务需求自行选择。
2、缓解数据库的压力，高并发场景下，数据库是无论如何都扛不住的，所以为了实现工业界要求的5个9或者更高的要求，缓存肯定是一个有效的措施。

**Q5**

Netty的线程模型，以及IO复用的知识，IO通信模型，select，poll，epoll自然而然的进入到面试官的考核范围。

**Q6**

关于分布式一致性理论，问到了Paxos，Raft协议，由于之前大略的看过一些拜占庭将军问题的文章，而Paxos，raft协议都无需考虑内部有欺诈节点的情况，只需考虑失效节点，但Paxos协议还是至今都没有理解，用一句话说，作者真xx的是个天才，写出来的东西不是给普罗大众看的，而据说国内目前只有阿里的Ocean Base完整实现了Paxos。

**Q7**

消息队列：rabbitMQ是如何保证消息可靠性的：从provider、MQ本身、consumer三者分别出发考虑
        
rabbitMQ为什么中间加入了router，而不是消息直接到达queue

**Q8**

数据库的索引：B+索引相比B树，哈希索引的优势是什么？核心，查询高度一样，中间节点不存储数据，查询性能稳定，引出另一种数据结构：跳跃表，通过泊松分布的公式能够得到，跳跃表的平均节点可以下降到比二叉树更少，介于1至2之间，更省内存。

**Q9**

关于数据库的事务隔离级别，索引机制，索引失效的问题。同时还问到了多线程并发添加同一条数据记录该怎么保证数据不发生冲突，想到了的分布式事务锁机制，但面试官要求使用数据库本身提供的特性解决。

**Q10**

轮到Linux内核了，考察了TCP三次握手建立连接，四次放手释放连接，为什么次数不一样，TIME_WAIT状态，MSL、TTL和RTT的含义，以及如此避免遭受不法人员利用TIME_WAIT状态进行攻击，耗光服务器资源。

TCP协议为什么能保证可靠性？依靠那条报文速率曲线和滑动窗口，拥塞窗口，ACK机制进行阐述

linux伙伴系统虽没有考察到，但也应该是一个需要准备的部分

**Q11**

终于轮到熟悉的Java了，但面试官根本不按套路出牌，问了都是jdk1.7和jdk1.8中xxx的不同之处

**Q12**

来到头条，怎能不聊一下go呢但浅尝辄止即可，毕竟现在还不是很多公司在使用，但伴随着go语言的高性能优势，轻松抗10w+的并发，以docker为代表的容器技术已经在资源虚拟化领域得到了广泛的应用，定是一颗崛起的新星，虽然08年才开始研发，到目前为止才刚10岁，但优势十分突出，又一次证明了学无止境这一残酷的现实。

**Q13**

关于SQL语句，直接说只了解了基本的，没有深入的了解，草草结束了这一话题


#结束语

到此几轮下来，已经感觉要精疲力尽了，果然面试也很费精力，hr面试就比较轻快了，只要别太浪，不穿沙滩裤+人字拖应该没什么大问题了。

总的来说，头条的面试还是很有难度的，面面俱到，感觉面试官超级厉害，无所不知的样子，不过人很nice，聊的过程中气氛很轻快，没有造成很大压力。不像某东，直接问抗不抗压。没有问道海量数据的处理之类的问题，也没有问道短链接的解决方案。但短链接里面涉及的信息论的一个点个人觉得还是值得推敲的。

路漫漫其修远兮，愿不浪费你的几分钟！！！










